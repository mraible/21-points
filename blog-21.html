<p>I wrote <a href="https://www.21-points.com">21-Points Health</a> to track my health. I found that knowing how
    you're doing on a weekly scale is informative and motivating. However, one of the things I found frustrating
    was you could never look back and see how you did over a month.</p>
<p>In the <a href="https://www.infoq.com/minibooks/jhipster-4-mini-book">JHipster Mini-Book</a>, I never mention
    developing 21-Point Health's history feature. Today, I'd like to explain to you how it works.
</p>
<p>When I developed v1.0 and <a href="https://github.com/mraible/21-points/releases/tag/2.0">v2.0</a> of 21-Points Health, it used AngularJS and <a href="http://angular-ui.github.io/ui-calendar/">AngularUI Calendar</a>. It looked OK
    in displaying your daily points in a month view.
</p>
<p style="text-align: center">
    <a href="https://farm5.staticflickr.com/4488/24099112928_d665428e3f_c.jpg" title="v1 History" rel="lightbox[21points-history]" data-href="https://www.flickr.com/photos/mraible/24099112928/in/album-72157688406761064/"><img src="https://farm5.staticflickr.com/4488/24099112928_d665428e3f_z.jpg" width="620" alt="v1 History"></a>
</p>
<p>The first thing I had to do was find an Angular version of the library that provided the same functionality. Luckily, I stumbled upon <a href="https://github.com/mattlewis92">Matt Lewis's</a> <a href="https://mattlewis92.github.io/angular-calendar/#/kitchen-sink">angular-calendar</a> library. Not only was it easy to use, but Matt provided great
    support for his project.
</p>
<p>I started by installing the library with yarn.</p>
<pre>yarn add angular-calendar</pre>
<p>Then I took a look at <code>component.ts</code> from the <a href="https://mattlewis92.github.io/angular-calendar/#/kitchen-sink">kitchen-sink example</a>. I copied the examples, and made sure I could get things to work with static data. Then I went to work on populating it with real data. In my `history.component.ts`, I added
    dependencies on all the existing services for points, blood pressure, weight, and others. Most of the local variables in this component are from the example I mentioned earlier.
</p>
<pre class="brush: typescript">
export class HistoryComponent implements OnInit, OnDestroy {
    modalRef: NgbModalRef;

    view = 'month';

    viewDate: Date = new Date();

    modalData: {
        action: string;
        event: CalendarEvent;
    };

    eventSubscriber: Subscription;

    actions: CalendarEventAction[] = [
        {
            label: '&lt;i class="fa fa-fw fa-pencil">&lt;/i>',
            onClick: ({event}: { event: CalendarEvent }): void => {
                this.handleEvent('edit', event);
            }
        },
        {
            label: '&lt;i class="fa fa-fw fa-times">&lt;/i>',
            onClick: ({event}: { event: CalendarEvent }): void => {
                this.handleEvent('delete', event);
            }
        }
    ];

    refresh: Subject&lt;any> = new Subject();

    events: CalendarEvent[] = [];

    activeDayIsOpen = true;

    currentAccount: any;

    constructor(private pointsService: PointsService, private bloodPressureService: BloodPressureService,
                private weightService: WeightService, private principal: Principal,
                private preferencesService: PreferencesService, private router: Router,
                private eventManager: JhiEventManager) {
    }

    ngOnInit() {
        this.principal.identity().then((account) => {
            this.currentAccount = account;
        });
        this.populateCalendar();
    }
...
}
</pre>
<p>When the component initializes, the user's identity is grabbed and the calendar is populated.</p>
